{"ast":null,"code":"import axios from\"axios\";/** User actions */var signUpRequest=function signUpRequest(){return{type:\"SIGN_UP_REQUEST\"};};var signUpSuccess=function signUpSuccess(payload){return{type:\"SIGN_UP_SUCCESS\",payload:payload};};var signUpFailure=function signUpFailure(error){return{type:\"SIGN_UP_FAILURE\",payload:error};};export var signUp=function signUp(user,history){return function(dispatch){dispatch(signUpRequest());axios.post('/users',user,{headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'}}).then(function(response){var data=response.data;dispatch(signUpSuccess(data));localStorage.setItem(\"USER-TOKEN\",data.token);localStorage.setItem(\"USER-ID\",data.user._id);alert('Cadastrado com sucesso');history.push(\"/home\");}).catch(function(error){dispatch(signUpFailure(error));alert(error);});};};//Sign in action creators\nvar signInRequest=function signInRequest(){return{type:'SIGN_IN_REQUEST'};};export var signInSuccess=function signInSuccess(data){return{type:'SIGN_IN_SUCCESS',payload:data};};var signInFailure=function signInFailure(error){return{type:'SIGN_IN_FAILURE',payload:error};};export var signIn=function signIn(){var userLoginData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var history=arguments.length>1?arguments[1]:undefined;var headers={'Access-Control-Allow-Origin':'*','Content-Type':'application/json'};return function(dispatch){dispatch(signInRequest());var _userLoginData$email=userLoginData.email,email=_userLoginData$email===void 0?\"\":_userLoginData$email,_userLoginData$passwo=userLoginData.password,password=_userLoginData$passwo===void 0?\"\":_userLoginData$passwo;var userLogin={email:email,password:password};axios.post('/users/login',userLogin,headers).then(function(response){var data=response.data;localStorage.setItem(\"USER-TOKEN\",data.token);localStorage.setItem(\"USER-ID\",data.user._id);localStorage.setItem(\"USER-NAME\",data.user.name);localStorage.setItem(\"USER-EMAIL\",data.user.email);alert('Logado com sucesso');dispatch(signInSuccess(data));history.push(\"/home\");}).catch(function(error){dispatch(signInFailure(error));alert('Email ou senha incorretos!');});};};//sign out action creators\nexport var signOutRequest=function signOutRequest(){return{type:'SIGN_OUT_REQUEST'};};export var signOutSuccess=function signOutSuccess(){return{type:'SIGN_OUT_SUCCESS'};};export var signOutFailure=function signOutFailure(){return{type:'SIGN_OUT_FAILURE'};};export var signOut=function signOut(history,token){return function(dispatch,getState){dispatch(signOutRequest());axios.post('/users/logoutAll',token,{headers:{'Authorization':\"Bearer \".concat(token),'Access-Control-Allow-Origin':'*'}}).then(function(result){dispatch(signOutSuccess());localStorage.clear();history.push(\"/entrar\");}).catch(function(error){dispatch(signOutFailure());console.log(error);});};};// Read users\nexport var getUserRequest=function getUserRequest(){return{type:'GET_USER_REQUEST'};};export var getUserSuccess=function getUserSuccess(data){return{type:'GET_USER_SUCCESS',payload:data};};export var getUserFailure=function getUserFailure(data){return{type:'GET_USER_FAILURE',payload:data};};export var getUser=function getUser(){return function(dispatch,getState){dispatch(getUserRequest());var token=getState().authentication.token;axios.get('/users/me',{headers:{'Authorization':\"Bearer \".concat(token),'Access-Control-Allow-Origin':'*'}}).then(function(result){console.log(result);dispatch(getUserSuccess(result.data));}).catch(function(error){dispatch(getUserFailure());console.log(error);});};};// Get avatar\nexport var getAvatarRequest=function getAvatarRequest(){return{type:'GET_AVATAR_REQUEST'};};export var getAvatarSuccess=function getAvatarSuccess(data){return{type:'GET_AVATAR_SUCCESS',payload:data};};export var getAvatarFailure=function getAvatarFailure(data){return{type:'GET_AVATAR_FAILURE',payload:data};};export var getAvatar=function getAvatar(){return function(dispatch,getState){dispatch(getAvatarRequest());var token=getState().authentication.token;var url=\"/users/\".concat(localStorage.getItem(\"USER-ID\"),\"/avatar\");axios.get(url,{headers:{'Authorization':\"Bearer \".concat(token),'Access-Control-Allow-Origin':'*'}}).then(function(result){console.log(result);dispatch(getAvatarSuccess(result.data));}).catch(function(error){dispatch(getAvatarFailure());console.log(error);});};};","map":{"version":3,"sources":["/Users/rodrigodaudskeff/Desktop/Mediabase/mediabase-app/client/src/redux/actions/usersActions.js"],"names":["axios","signUpRequest","type","signUpSuccess","payload","signUpFailure","error","signUp","user","history","dispatch","post","headers","then","response","data","localStorage","setItem","token","_id","alert","push","catch","signInRequest","signInSuccess","signInFailure","signIn","userLoginData","email","password","userLogin","name","signOutRequest","signOutSuccess","signOutFailure","signOut","getState","result","clear","console","log","getUserRequest","getUserSuccess","getUserFailure","getUser","authentication","get","getAvatarRequest","getAvatarSuccess","getAvatarFailure","getAvatar","url","getItem"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\n\n\n/** User actions */\n\n\nconst signUpRequest = () => {\n  return {\n    type: \"SIGN_UP_REQUEST\",\n  };\n};\n\n\n\nconst signUpSuccess = (payload) => {\n  return {\n    type: \"SIGN_UP_SUCCESS\",\n    payload\n  };\n};\n\n\n\nconst signUpFailure = (error) => {\n  return {\n    type: \"SIGN_UP_FAILURE\",\n    payload: error,\n  };\n};\n\n\n\nexport const signUp = (user, history) => {\n\n\n  return function (dispatch) {\n    dispatch(signUpRequest());\n    axios.post('/users',user,{\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n      }\n    })\n    .then((response) => {\n        const data = response.data;\n        dispatch(signUpSuccess(data));\n        localStorage.setItem(\"USER-TOKEN\", data.token);\n        localStorage.setItem(\"USER-ID\", data.user._id);\n        alert('Cadastrado com sucesso');\n        history.push(\"/home\");\n    })\n    .catch((error) => {\n      dispatch(signUpFailure(error));\n      alert(error)\n    });\n  };\n};\n\n//Sign in action creators\n\nconst signInRequest = () => {\n  return {\n    type: 'SIGN_IN_REQUEST',\n  };\n};\n\nexport const signInSuccess = (data) => {\n  return {\n    type: 'SIGN_IN_SUCCESS',\n    payload: data\n  };\n};\n\nconst signInFailure = (error) => {\n  return {\n    type: 'SIGN_IN_FAILURE',\n    payload: error,\n  };\n};\n\nexport const signIn = (userLoginData = {}, history) => {\n\n  const headers = {\n    'Access-Control-Allow-Origin': '*',\n    'Content-Type': 'application/json',\n  }\n\n  return (dispatch) => {\n\n    dispatch(signInRequest())\n\n    const { email = \"\", password = \"\" } = userLoginData\n    const userLogin = { email, password }\n\n\n    axios.post('/users/login',userLogin,headers)\n    .then((response) => {\n      const data = response.data;\n      localStorage.setItem(\"USER-TOKEN\", data.token);\n      localStorage.setItem(\"USER-ID\", data.user._id);\n      localStorage.setItem(\"USER-NAME\", data.user.name);\n      localStorage.setItem(\"USER-EMAIL\", data.user.email);\n      alert('Logado com sucesso');\n      dispatch(signInSuccess(data))\n      history.push(\"/home\");\n    }).catch( error => {\n      dispatch(signInFailure(error))\n      alert('Email ou senha incorretos!');\n\n    })\n\n    } \n  \n};\n\n//sign out action creators\n\nexport const signOutRequest = function () {\n  return {\n    type: 'SIGN_OUT_REQUEST',\n  };\n};\n\nexport const signOutSuccess = function () {\n  return {\n    type: 'SIGN_OUT_SUCCESS',\n  };\n};\n\nexport const signOutFailure = function () {\n  return {\n    type: 'SIGN_OUT_FAILURE',\n  };\n};\n\nexport const signOut = function (history,token) {\n\n\n  return function (dispatch,getState) {\n\n    dispatch(signOutRequest());\n\n    \n    axios.post('/users/logoutAll',token,{\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Access-Control-Allow-Origin': '*',\n      }\n    }).then(result => {\n      dispatch(signOutSuccess());\n      localStorage.clear();\n      history.push(\"/entrar\");\n    }).catch( error => {\n      dispatch(signOutFailure());\n      console.log(error)\n    })\n\n  };\n};\n\n\n// Read users\n\nexport const getUserRequest = function () {\n  return {\n    type: 'GET_USER_REQUEST',\n  };\n};\n\nexport const getUserSuccess = function (data) {\n  return {\n    type: 'GET_USER_SUCCESS',\n    payload: data\n  };\n};\n\nexport const getUserFailure = function (data) {\n  return {\n    type: 'GET_USER_FAILURE',\n    payload: data\n  };\n};\n\nexport const getUser = function () {\n\n  return function (dispatch,getState) {\n\n    dispatch(getUserRequest());\n\n    const { token } = getState().authentication\n\n\n    axios.get('/users/me',{\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Access-Control-Allow-Origin': '*',\n      }\n    }).then(result => {\n      console.log(result)\n      dispatch(getUserSuccess(result.data));\n    }).catch( error => {\n      dispatch(getUserFailure());\n      console.log(error)\n    })\n\n  };\n};\n\n\n// Get avatar\n\nexport const getAvatarRequest = function () {\n  return {\n    type: 'GET_AVATAR_REQUEST',\n  };\n};\n\nexport const getAvatarSuccess = function (data) {\n  return {\n    type: 'GET_AVATAR_SUCCESS',\n    payload: data\n  };\n};\n\nexport const getAvatarFailure = function (data) {\n  return {\n    type: 'GET_AVATAR_FAILURE',\n    payload: data\n  };\n};\n\nexport const getAvatar = function () {\n\n  return function (dispatch,getState) {\n\n    dispatch(getAvatarRequest());\n\n    const { token } = getState().authentication\n    const url = `/users/${localStorage.getItem(\"USER-ID\")}/avatar`\n\n    axios.get(url,{\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Access-Control-Allow-Origin': '*',\n      }\n    }).then(result => {\n      console.log(result)\n      dispatch(getAvatarSuccess(result.data));\n    }).catch( error => {\n      dispatch(getAvatarFailure());\n      console.log(error)\n    })\n\n  };\n};"]},"metadata":{},"sourceType":"module"}