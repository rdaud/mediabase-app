{"ast":null,"code":"const mongoose = require('mongoose');\n\nconst validator = require('validator');\n\nconst Campaign = require('./campaign');\n/**\n * Create Criativo\n */\n\n\nconst criativoSchema = new mongoose.Schema({\n  nome: {\n    type: String,\n    required: true\n  },\n  imagem: {\n    type: Buffer,\n    required: true\n  },\n  descricao: {\n    type: String\n  },\n  owner: {\n    type: mongoose.Schema.Types.ObjectId,\n    required: true,\n    ref: 'User'\n  },\n  campaign: {\n    type: mongoose.Schema.Types.ObjectId,\n    required: true,\n    ref: 'Campaign'\n  }\n}, {\n  timestamps: true\n}); // Delete user tasks when user is removed\n\ncriativoSchema.pre('remove', async function (next) {\n  const user = this;\n  await Campaign.deleteMany({\n    criativos: user._id\n  });\n  next();\n});\nconst Criativo = mongoose.model('Criativo', criativoSchema, 'criativos');\nmodule.exports = Criativo;","map":{"version":3,"sources":["/Users/rodrigodaudskeff/Desktop/Mediabase/mediabase-app/server/src/models/criativo.js"],"names":["mongoose","require","validator","Campaign","criativoSchema","Schema","nome","type","String","required","imagem","Buffer","descricao","owner","Types","ObjectId","ref","campaign","timestamps","pre","next","user","deleteMany","criativos","_id","Criativo","model","module","exports"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAzB;;AACA,MAAME,QAAQ,GAAGF,OAAO,CAAC,YAAD,CAAxB;AAIA;AACA;AACA;;;AAEA,MAAMG,cAAc,GAAG,IAAIJ,QAAQ,CAACK,MAAb,CAAoB;AACvCC,EAAAA,IAAI,EAAE;AACFC,IAAAA,IAAI,EAAEC,MADJ;AAEFC,IAAAA,QAAQ,EAAE;AAFR,GADiC;AAKvCC,EAAAA,MAAM,EAAE;AACJH,IAAAA,IAAI,EAAEI,MADF;AAEJF,IAAAA,QAAQ,EAAE;AAFN,GAL+B;AASvCG,EAAAA,SAAS,EAAE;AACPL,IAAAA,IAAI,EAAEC;AADC,GAT4B;AAYvCK,EAAAA,KAAK,EAAE;AACHN,IAAAA,IAAI,EAAEP,QAAQ,CAACK,MAAT,CAAgBS,KAAhB,CAAsBC,QADzB;AAEHN,IAAAA,QAAQ,EAAE,IAFP;AAGHO,IAAAA,GAAG,EAAE;AAHF,GAZgC;AAiBvCC,EAAAA,QAAQ,EAAE;AACNV,IAAAA,IAAI,EAAEP,QAAQ,CAACK,MAAT,CAAgBS,KAAhB,CAAsBC,QADtB;AAENN,IAAAA,QAAQ,EAAE,IAFJ;AAGNO,IAAAA,GAAG,EAAE;AAHC;AAjB6B,CAApB,EAsBpB;AACCE,EAAAA,UAAU,EAAE;AADb,CAtBoB,CAAvB,C,CA0BA;;AACAd,cAAc,CAACe,GAAf,CAAmB,QAAnB,EAA6B,gBAAeC,IAAf,EAAqB;AAC9C,QAAMC,IAAI,GAAG,IAAb;AACA,QAAMlB,QAAQ,CAACmB,UAAT,CAAoB;AAAEC,IAAAA,SAAS,EAAEF,IAAI,CAACG;AAAlB,GAApB,CAAN;AACAJ,EAAAA,IAAI;AACP,CAJD;AAOA,MAAMK,QAAQ,GAAGzB,QAAQ,CAAC0B,KAAT,CAAe,UAAf,EAA2BtB,cAA3B,EAA2C,WAA3C,CAAjB;AAGAuB,MAAM,CAACC,OAAP,GAAiBH,QAAjB","sourcesContent":["const mongoose = require('mongoose')\nconst validator = require('validator')\nconst Campaign = require('./campaign')\n\n\n\n/**\n * Create Criativo\n */\n\nconst criativoSchema = new mongoose.Schema({\n    nome: {\n        type: String,\n        required: true\n    },\n    imagem: {\n        type: Buffer,\n        required: true\n    },\n    descricao: {\n        type: String,\n    },\n    owner: {\n        type: mongoose.Schema.Types.ObjectId,\n        required: true,\n        ref: 'User'\n    },\n    campaign: {\n        type: mongoose.Schema.Types.ObjectId,\n        required: true,\n        ref: 'Campaign'\n    },\n}, {\n    timestamps: true,\n})\n\n// Delete user tasks when user is removed\ncriativoSchema.pre('remove', async function(next) {\n    const user = this\n    await Campaign.deleteMany({ criativos: user._id })\n    next()\n})\n\n\nconst Criativo = mongoose.model('Criativo', criativoSchema, 'criativos')\n\n\nmodule.exports = Criativo"]},"metadata":{},"sourceType":"module"}