{"ast":null,"code":"import _slicedToArray from\"/Users/rodrigodaudskeff/Desktop/Mediabase/mediabase-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../../App.scss';import React,{useState,useCallback}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector,connect}from\"react-redux\";import{useHistory}from'react-router-dom';import{Dropdown,DropdownItem}from\"../\";import logo from\"../../assets/logo/logo-vertical.svg\";import{UserOutlined}from'@ant-design/icons';import{signOut}from'../../redux/actions/usersActions';import{Navigation,NavItem,Logo,Avatar}from'./styles';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(_ref){var userInfo=_ref.userInfo,token=_ref.token;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hasAvatar=_useState2[0],setHasAvatar=_useState2[1];var profilePicUrl=userInfo!==null&&\"http://localhost:3001/users/\".concat(userInfo._id,\"/avatar\");var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isShown=_useState4[0],setIsShown=_useState4[1];var dispatch=useDispatch();var history=useHistory();function checkIfHasProfilePic(){axios.get(profilePicUrl,{headers:{'Authorization':\"Bearer \".concat(token),'Access-Control-Allow-Origin':'*'}}).then(function(result){setHasAvatar(true);}).catch(function(error){console.log(error);});}var memoizedCheckIfHasProfilePic=useCallback(function(){checkIfHasProfilePic();},[]);if(userInfo!==null){memoizedCheckIfHasProfilePic();}var handleLogOutClick=function handleLogOutClick(){dispatch(signOut(history,token));console.log(\"clicked\");};var handlePerfilClick=function handlePerfilClick(){history.go('/perfil');};return/*#__PURE__*/_jsxs(Navigation,{children:[/*#__PURE__*/_jsx(Logo,{children:/*#__PURE__*/_jsx(Link,{to:\"/home\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Mediabase\"})})}),/*#__PURE__*/_jsxs(NavItem,{isShown:isShown,onMouseOver:function onMouseOver(){return setIsShown(true);},onMouseLeave:function onMouseLeave(){return setIsShown(false);},children:[hasAvatar?/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(\"img\",{width:\"44\",src:profilePicUrl})}):/*#__PURE__*/_jsx(Avatar,{children:/*#__PURE__*/_jsx(UserOutlined,{style:{color:\"gray\"}})}),/*#__PURE__*/_jsxs(Dropdown,{isShown:isShown,bottom:\"0\",right:\"0\",left:\"56px\",children:[/*#__PURE__*/_jsx(DropdownItem,{onClick:handlePerfilClick,children:/*#__PURE__*/_jsx(Link,{to:\"/perfil\",children:\"Perfil\"})}),/*#__PURE__*/_jsx(DropdownItem,{onClick:handleLogOutClick,children:\"Sair da conta\"})]})]})]});};function mapStateToProps(state){var userInfo=state.authentication.user;var token=state.authentication.token;return{userInfo:userInfo,token:token};}var connectedStore=connect(mapStateToProps)(Navbar);export{connectedStore as Navbar};","map":{"version":3,"sources":["/Users/rodrigodaudskeff/Desktop/Mediabase/mediabase-app/client/src/components/Navbar/index.jsx"],"names":["React","useState","useCallback","Link","useDispatch","useSelector","connect","useHistory","Dropdown","DropdownItem","UserOutlined","signOut","Navigation","NavItem","Logo","Avatar","axios","Navbar","userInfo","token","hasAvatar","setHasAvatar","profilePicUrl","_id","isShown","setIsShown","dispatch","history","checkIfHasProfilePic","get","headers","then","result","catch","error","console","log","memoizedCheckIfHasProfilePic","handleLogOutClick","handlePerfilClick","go","logo","color","mapStateToProps","state","authentication","user","connectedStore"],"mappings":"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","sourcesContent":["import '../../App.scss';\nimport React,{ useState, useCallback }  from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector,connect } from \"react-redux\";\nimport { useHistory } from 'react-router-dom';\nimport { Dropdown, DropdownItem } from \"../\";\nimport logo from '../../assets/logo/logo-vertical.svg';\nimport { UserOutlined } from '@ant-design/icons'\nimport { signOut } from '../../redux/actions/usersActions';\nimport { Navigation, NavItem, Logo, Avatar } from './styles';\nimport axios from 'axios';\n\n\n\nconst Navbar = ({ userInfo, token }) => {\n\n    const [ hasAvatar, setHasAvatar ] = useState(false)\n    const profilePicUrl = userInfo !== null && `http://localhost:3001/users/${userInfo._id}/avatar`\n    const [ isShown, setIsShown ] = useState(false)\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n\n    function checkIfHasProfilePic() {\n        axios.get(profilePicUrl,{\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Access-Control-Allow-Origin': '*',\n            }\n            }).then(result => {\n                setHasAvatar(true)\n            }).catch( error => {\n                console.log(error)\n            })       \n    }\n    \n      const memoizedCheckIfHasProfilePic = useCallback(\n        () => {\n            checkIfHasProfilePic()\n        },\n        [],\n      );\n\n      if (userInfo !== null) {\n        memoizedCheckIfHasProfilePic()\n      }\n\n    const handleLogOutClick = () => {\n        dispatch(signOut(history,token))\n        console.log(\"clicked\")\n    }\n\n    const handlePerfilClick = () => {\n        history.go('/perfil')\n    }\n\n      return (      \n        <Navigation>\n            <Logo>\n                <Link\n                to='/home'\n                >\n                <img src={logo} alt=\"Mediabase\" />\n                </Link>                \n            </Logo>\n            <NavItem isShown={isShown} onMouseOver={() => setIsShown(true)} onMouseLeave={() => setIsShown(false)}>\n            { hasAvatar ? \n            <Avatar>\n                <img width=\"44\" src={profilePicUrl}></img>\n            </Avatar>\n             :\n             <Avatar>\n                 <UserOutlined style={{color: `gray`}} />\n             </Avatar>\n             }\n                <Dropdown isShown={isShown} bottom=\"0\" right=\"0\" left=\"56px\">\n                    <DropdownItem onClick={handlePerfilClick}>\n                        <Link to='/perfil'>\n                        Perfil\n                        </Link>\n                    </DropdownItem>\n                    <DropdownItem onClick={handleLogOutClick}>        \n                       Sair da conta\n                    </DropdownItem>\n                </Dropdown>\n            </NavItem> \n        </Navigation>\n    )\n}\n\n\nfunction mapStateToProps(state) {\n    const userInfo = state.authentication.user\n    const { token } = state.authentication\n    return { userInfo, token }\n  }\n\nconst connectedStore = connect(mapStateToProps)(Navbar)\n\nexport { connectedStore as Navbar }"]},"metadata":{},"sourceType":"module"}